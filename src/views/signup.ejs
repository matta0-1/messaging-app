<head>
    <title>Messaging Site - Sign Up</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>

<!-- Old ui
<div style="text-align: center;">
    <h1>Welcome to Web Messenger</h1>
    <h2>Register</h2>

    <form id="signupForm" style="margin-top: 30px;" action="/auth/signup" method="POST">
        <input type="text" name="firstName" value="<%= defaults ? defaults.firstName : '' %>" placeholder="First name"
            style="margin-bottom: 15px;" required>
        <input type="text" name="lastName" value="<%= defaults ? defaults.lastName : '' %>" placeholder="Last name"
            style="margin-bottom: 20px;" required>
        <input type="text" name="username" value="<%= defaults ? defaults.username : '' %>" placeholder="Username"
            style="margin-bottom: 20px;" required>
        <input type="email" name="email" value="<%= defaults ? defaults.email : '' %>" placeholder="Email"
            style="margin-bottom: 15px;" required>
        <input type="password" id="password" value="<%= defaults ? defaults.password : '' %>" name="password"
            placeholder="Password" style="margin-bottom: 20px;" required>
        NOTE: Do not refill confirmation field. Let user retype it
        <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm Password"
            style="margin-bottom: 20px;" required>

        <div style="display: flex; gap: 15px; justify-content: center;">
            <button type="submit" class="btn" style="margin-top: 0;">Sign Up</button>
            <button type="button" class="btn" onclick="window.location.href='/auth/login'" style="margin-top: 0;">
                Go to Login</button>
        </div>

        <% if (typeof error !=='undefined' && error) { %>
            <p style="color: #ff4444; margin-top: 20px; font-size: 0.95rem;">
                <%= error %>
            </p>
            <% } %>

    </form>
</div> -->

<div class="d-flex justify-content-center mt-5">
    <div class="card shadow-sm p-4" style="max-width: 500px; width: 100%;">
        <h2 class="text-center mb-4">Create Account</h2>

        <% if (typeof error !== 'undefined' && error) { %>
            <div class="alert alert-danger text-center"><%= error %></div>
        <% } %>

        <form id="signupForm" action="/auth/signup" method="POST">

            <div class="row">
                <div class="col-md-6 mb-3">
                    <input
                        type="text"
                        name="firstName"
                        value="<%= defaults ? defaults.firstName : '' %>"
                        class="form-control form-control-lg rounded-pill"
                        placeholder="First Name"
                        required
                    >
                </div>

                <div class="col-md-6 mb-3">
                    <input
                        type="text"
                        name="lastName"
                        value="<%= defaults ? defaults.lastName : '' %>"
                        class="form-control form-control-lg rounded-pill"
                        placeholder="Last Name"
                        required
                    >
                </div>
            </div>

            <div class="mb-3">
                <input
                    type="text"
                    name="username"
                    value="<%= defaults ? defaults.username : '' %>"
                    class="form-control form-control-lg rounded-pill"
                    placeholder="Username"
                    required
                >
            </div>

            <div class="mb-3">
                <input
                    type="email"
                    name="email"
                    value="<%= defaults ? defaults.email : '' %>"
                    class="form-control form-control-lg rounded-pill"
                    placeholder="Email"
                    required
                >
            </div>

            <div class="mb-3">
                <input
                    type="password"
                    id="password"
                    name="password"
                    value="<%= defaults ? defaults.password : '' %>"
                    class="form-control form-control-lg rounded-pill"
                    placeholder="Password"
                    required
                >
            </div>

            <div class="mb-4">
                <!-- Not autofilled on purpose -->
                <input
                    type="password"
                    id="confirmPassword"
                    name="confirmPassword"
                    class="form-control form-control-lg rounded-pill"
                    placeholder="Confirm Password"
                    required
                >
            </div>

            <button class="btn btn-primary btn-lg rounded-pill w-100 mb-3">Sign Up</button>
            <a href="/auth/login" class="btn btn-outline-secondary rounded-pill btn-lg w-100">Already have an account?</a>

        </form>
    </div>
</div>

<script>
    const form = document.getElementById('signupForm');
    form.addEventListener('submit', function (event) {
        const password = document.getElementById('password').value;
        const confirm = document.getElementById('confirmPassword').value;

        if (password !== confirm) {
            event.preventDefault();
            alert("Passwords do not match!");
        }
    });
</script>
