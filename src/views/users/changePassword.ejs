<% layout='layout' %>
    <% title='Change Password' %>

        <div style="text-align: center;">
            <h1>Change Password</h1>

            <form id="changePasswordForm" style="margin-top: 30px;" action="/users/change-password" method="POST">
                <input type="hidden" name="_method" value="PUT">
                <input type="password" name="oldPassword" placeholder="Old Password" style="margin-bottom: 15px;" required>
                <input type="password" id="newPassword" name="newPassword" placeholder="New Password" style="margin-bottom: 15px;" required>

                <input type="password" id="confirmNewPassword" name="confirmPassword" placeholder="Confirm Password"
                    style="margin-bottom: 20px;" required>

                <div style="display: flex; gap: 15px; justify-content: center;">
                    <button type="submit" class="btn btn-primary" style="margin-top: 0;">Change Password</button>
                </div>

                <% if (typeof error !=='undefined' && error) { %>
                    <p style="color: #ff4444; margin-top: 20px; font-size: 0.95rem;">
                        <%= error %>
                    </p>
                    <% } %>
            </form>
        </div>

        <script>
            const form = document.getElementById('changePasswordForm');
            form.addEventListener('submit', function (event) {
                const password = document.getElementById('newPassword').value;
                const confirm = document.getElementById('confirmNewPassword').value;

                if (password !== confirm) {
                    event.preventDefault();
                    alert("Passwords do not match!");
                }
            });
        </script>
