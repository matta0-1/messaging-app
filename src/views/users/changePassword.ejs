<% layout='layout' %>
    <% title='Change Password' %>

        <div class="d-flex justify-content-center mt-5">
            <div class="card shadow-sm p-4" style="max-width: 420px; width: 100%;">
                <h3 class="text-center mb-4">Change Password</h3>

                <% if (error) { %>
                    <div class="alert alert-danger text-center mb-3">
                        <%= error %>
                    </div>
                    <% } %>

                        <form id="changePasswordForm" action="/users/change-password" method="POST">
                            <input type="hidden" name="_method" value="PUT">

                            <div class="mb-3">
                                <input type="password" name="oldPassword"
                                    class="form-control form-control-lg rounded-pill" placeholder="Current Password"
                                    required>
                            </div>

                            <div class="mb-3">
                                <input type="password" id="newPassword" name="newPassword"
                                    class="form-control form-control-lg rounded-pill" placeholder="New Password"
                                    required>
                            </div>

                            <div class="mb-4">
                                <input type="password" id="confirmNewPassword" name="confirmPassword"
                                    class="form-control form-control-lg rounded-pill" placeholder="Confirm Password"
                                    required>
                            </div>

                            <button class="btn btn-primary btn-lg rounded-pill w-100">Update Password</button>
                        </form>

            </div>
        </div>

        <script>
            const form = document.getElementById('changePasswordForm');
            form.addEventListener('submit', function (e) {
                const p = document.getElementById('newPassword').value;
                const c = document.getElementById('confirmNewPassword').value;

                if (p !== c) {
                    e.preventDefault();
                    alert("Passwords do not match!");
                }
            });
        </script>
